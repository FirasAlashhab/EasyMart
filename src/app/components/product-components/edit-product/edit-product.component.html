<div class="container">
  <form
    data-bs-theme="dark"
    class="mb-5"
    #form="ngForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="mb-3">
      <label class="form-label text-light ms-2">Name</label>
      <input
        type="text"
        class="form-control"
        name="name"
        id="name"
        style="outline: none; box-shadow: none"
        [(ngModel)]="productData.name"
        required
      />
      <label class="form-label text-light mt-4 ms-2">Description</label>
      <textarea
        type="textarea"
        class="form-control"
        name="description"
        id="description"
        style="outline: none; box-shadow: none"
        [(ngModel)]="productData.description"
        required
      >
      </textarea>

      <ng-container *ngIf="productData.pictureUrl != ''">
        <div>
          <img
            [src]="productData.pictureUrl"
            style="height: 200px"
            class="my-3"
          />
        </div>
      </ng-container>

      <label class="form-label text-light mt-4 ms-2">Product Image</label>
      <input
        class="form-control text-light"
        type="file"
        name="pictureUrl"
        (change)="onFileUploadChange($event)"
      />

      <label class="form-label text-light mt-4 ms-2">Price</label>
      <input
        type="number"
        class="form-control"
        name="price"
        id="price"
        style="outline: none; box-shadow: none"
        [(ngModel)]="productData.price"
        required
      />
      <label class="form-label text-light mt-4 ms-2">Product Brand</label>
      <select
        name="productBrand"
        id="productBrand"
        class="form-control"
        [(ngModel)]="productData.productBrandId"
        required
      >
        <option *ngFor="let brand of productBrands" [value]="brand.id">
          {{ brand.name }}
        </option>
      </select>
      <label class="form-label text-light mt-4 ms-2">Product Types</label>
      <select
        name="productType"
        id="productType"
        class="form-control"
        [(ngModel)]="productData.productTypeId"
        required
      >
        <option *ngFor="let type of productTypes" [value]="type.id">
          {{ type.name }}
        </option>
      </select>
      <div class="mb-3 form-check mt-3">
        <input
          type="checkbox"
          class="form-check-input"
          id="inStock"
          name="inStock"
          [(ngModel)]="productData.inStock"
        />
        <label class="form-check-label text-light">In Stock</label>
      </div>
    </div>
    <div class="d-flex align-items-center justify-content-end">
      <button type="submit" class="btn btn-dark" [disabled]="!form.valid">
        Update
      </button>
      <button
        type="button"
        class="btn btn-danger mx-2"
        (click)="openDeleteModal()"
      >
        Delete
      </button>
    </div>
  </form>

  <div
    data-bs-theme="dark"
    class="modal fade"
    id="deleteConfirmationModal"
    tabindex="-1"
    aria-labelledby="deleteConfirmationModalLabel"
    aria-hidden="true"
    #deleteConfirmationModal
  >
    <div class="modal-dialog modal-fullscreen-sm-down">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title text-light" id="deleteConfirmationModalLabel">
            Confirm Delete
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body text-light">
          Are you sure you want to delete this product?
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-danger"
            (click)="deleteProduct()"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
